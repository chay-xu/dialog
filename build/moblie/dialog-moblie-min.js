!function(t){function e(t){this.options=$.extend({},a,t?t:{}),n&&n.close(),this.view()}var n=null,i=1,o=999900,a={type:"load",time:!1,shade:!0,shadeClose:!0,html:"",animation:"slidedownin",unload:!0,align:"center",buttons:[{name:"取消",callback:function(){}},{name:"确认",callback:function(){}}],init:function(){}};cssStyle={center:{}},e.prototype.view=function(){var t=this,e=t.options,n=e.type,a=e.html,c=$('<div class="xcy-layer"></div>'),l="",s="",d=e.align,h={};t.$el=c,("load"==n||"tip"==n)&&(s+="load"==n?'<div class="xcy-load"> </div><div class="xcy-text">'+a+"</div>":a,l='<div class="xcy-load-box">'+s+"</div>"),("confirm"==n||"alert"==n)&&($.each(e.buttons,function(t,e){s+='<div class="xcy-btn">'+e.name+"</div>"}),l='<div class="xcy-box"><div class="xcy-con">'+a+'</div><div class="xcy-btns">'+s+"</div></div>"),c.html("page"==n?a:'<div class="xcy-main"><div class="xcy-section">'+l+"</div></div>"),e.shade&&(t.$shade=$('<div class="xcy-shade"></div>'),t.$shade.attr("id","xcy-layer-"+i++),$("body").append(t.$shade),t.$shade.css({zIndex:o++})),c.addClass(e.animation),c.attr("id","xcy-layer-"+i++),$("body").append(c),t.action(),"center"==d?h={marginTop:-(t.$el.height()/2),marginLeft:-(t.$el.width()/2),left:"50%",top:"50%"}:"bottom"==d||"top"==d?(h[d]=0,h.width="100%"):("left"==d||"right"==d)&&(h[d]=0,h.top=0,h.height="100%"),h.zIndex=o++,t.$el.css(h)},e.prototype.action=function(){{var t=this,e=t.options,n=(e.type,e.time);e.html}n!==!1&&(1==n&&(n=1200),setTimeout(function(){t.close()},n)),e.shade&&t.$shade.on("click touchmove",function(){t.close()}),$btns=$(".xcy-btn",t.$el),0!==$btns.length&&$(".xcy-btn",t.$el).each(function(n){var i=$(this),o=e.buttons[n];i.click(function(){callback=o.callback?o.callback(i.text()):null,callback!==!1&&t.close()})}),e.init()},e.prototype.close=function(){var t=this,e=t.options;e.unload?t.unload():t.hide(),n=null},e.prototype.unload=function(){var t=this,e=t.options;t.$el.find(".xcy-load").removeClass("xcy-load"),$(".xcy-btn",t.$el).off("click"),t.$el.remove(),e.shade&&(t.$shade.off("click touchmove"),t.$shade.remove())},e.prototype.show=function(){var t=this;t.$el.show(),t.$shade.show(),n=t},e.prototype.hide=function(){var t=this;t.$el.hide(),t.$shade.hide()};var c={create:function(t){return n=new e(t)},load:function(t,i,o){return n=new e({html:t,time:void 0!==i?i:1200,shadeClose:o?o:!1})},confirm:function(t,i,o,a){return n=new e({type:"confirm",html:t,shadeClose:a?a:!1,buttons:[{name:"取消",callback:o},{name:"确认",callback:i}]})},alert:function(t,i,o){return n=new e({type:"alert",html:t,shadeClose:o?o:!1,buttons:[{name:"确认",callback:i?i:function(){}}]})},tip:function(t,i,o){return n=new e({type:"tip",html:t,time:void 0!==i?i:1200,shadeClose:o?o:!0})},page:function(t,i,o){return n=new e({type:"page",html:t,callback:i,shadeClose:o?o:!0})},config:function(t){a=$.extend(a,t?t:{})}};"function"==typeof define?define(function(){return c}):t.Dialog=c}(window);