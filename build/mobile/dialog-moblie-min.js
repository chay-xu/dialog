!function(t){function n(t){this.options=$.extend({},a,t?t:{}),e&&e.close(),this.view()}var e=null,i=1,o=999900,a={type:"load",time:!1,shade:!0,shadeClose:!0,html:"",animation:!1,unload:!0,align:"center",buttons:[{name:"取消",callback:function(){}},{name:"确认",callback:function(){}}],init:function(){}};n.prototype.view=function(){var t=this,n=t.options,e=n.type,a=n.html,l=$('<div class="xcy-layer"></div>'),c="",s="",d=n.align,h={};t.$el=l,("load"==e||"tip"==e)&&(s+="load"==e?'<div class="xcy-load"> </div><div class="xcy-text">'+a+"</div>":a,c='<div class="xcy-load-box">'+s+"</div>"),("confirm"==e||"alert"==e)&&($.each(n.buttons,function(t,n){s+='<div class="xcy-btn">'+n.name+"</div>"}),c='<div class="xcy-box"><div class="xcy-con">'+a+'</div><div class="xcy-btns">'+s+"</div></div>"),l.html("page"==e?a:'<div class="xcy-main"><div class="xcy-section">'+c+"</div></div>"),n.shade&&(t.$shade=$('<div class="xcy-shade"></div>'),t.$shade.attr("id","xcy-layer-"+i++),$("body").append(t.$shade),t.$shade.css({zIndex:o++})),n.animation&&l.addClass(n.animation+"in"),l.attr("id","xcy-layer-"+i++),$("body").append(l),t.action(),"center"==d?h={marginTop:-(t.$el.height()/2),marginLeft:-(t.$el.width()/2),left:"50%",top:"50%"}:"bottom"==d||"top"==d?(h[d]=0,h.width="100%"):("left"==d||"right"==d)&&(h[d]=0,h.top=0,h.height="100%"),h.zIndex=o++,t.$el.css(h)},n.prototype.action=function(){{var t=this,n=t.options,e=(n.type,n.time);n.html}e!==!1&&(1==e&&(e=1200),setTimeout(function(){t.close()},e)),n.shade&&t.$shade.on("click touchmove",function(){t.close()}),$btns=$(".xcy-btn",t.$el),0!==$btns.length&&$(".xcy-btn",t.$el).each(function(e){var i=$(this),o=n.buttons[e];i.click(function(){callback=o.callback?o.callback(i.text()):null,callback!==!1&&t.close()})}),n.init()},n.prototype.close=function(){var t=this,n=t.options;n.unload?n.animation?t.animate(t.unload):t.unload():n.animation?t.animate(t.hide):t.hide(),e=null},n.prototype.animate=function(t){var n=this,e=n.options;n.$el.removeClass(e.animation+"in"),n.$el.addClass(e.animation+"out"),n.$el.on("webkitAnimationEnd",function(){n.$el.removeClass(e.animation+"out"),t.apply(n),n.$el.off()})},n.prototype.unload=function(){var t=this,n=t.options;t.$el.find(".xcy-load").removeClass("xcy-load"),$(".xcy-btn",t.$el).off("click"),t.$el.remove(),n.shade&&(t.$shade.off("click touchmove"),t.$shade.remove()),t.options=null},n.prototype.show=function(){{var t=this;t.options}e&&e.close(),t.$el.show(),t.$shade&&t.$shade.show(),e=t},n.prototype.hide=function(){{var t=this;t.options}t.$el.hide(),t.$shade&&t.$shade.hide()};var l={create:function(t){return e=new n(t)},load:function(t,i,o){return e=new n({html:t,time:void 0!==i?i:1200,shadeClose:o?o:!1})},confirm:function(t,i,o,a){return e=new n({type:"confirm",html:t,shadeClose:a?a:!1,buttons:[{name:"取消",callback:o},{name:"确认",callback:i}]})},alert:function(t,i,o){return e=new n({type:"alert",html:t,shadeClose:o?o:!1,buttons:[{name:"确认",callback:i?i:function(){}}]})},tip:function(t,i,o){return e=new n({type:"tip",html:t,time:void 0!==i?i:1200,shadeClose:o?o:!0})},page:function(t,i,o){return e=new n({type:"page",html:t,callback:i,shadeClose:o?o:!0})},config:function(t){a=$.extend(a,t?t:{})}};"function"==typeof define?define(function(){return l}):t.Dialog=l}(window);