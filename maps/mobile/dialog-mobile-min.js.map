{"version":3,"sources":["mobile/dialog-mobile.js"],"names":["window","DialogLayer","options","this","$","extend","defaults","isDialog","close","view","_cid","_zIndex","type","time","shade","shadeClose","html","animation","unload","align","buttons","name","callback","init","closeFn","prototype","_self","opts","$div","content","tags","cssStyle","$el","each","i","v","$shade","attr","append","css","zIndex","addClass","action","marginTop","height","marginLeft","width","left","top","setTimeout","on","$btns","length","$btn","obj","click","text","animate","hide","removeClass","apply","off","find","remove","show","dialog","create","load","undefined","confirm","sure","cancel","alert","tip","page","config","define","Dialog"],"mappings":"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","file":"mobile/dialog-mobile-min.js","sourcesContent":["/**\r\n * @file dialog moblie plugin\r\n * @author xucaiyu\r\n * @email 569455187@qq.com\r\n * @date \r\n * @copyright ifind all rights reserved. \r\n */\r\n(function(window){\r\n\tvar isDialog = null,\r\n\t\t_cid = 1,\r\n\t\t_zIndex = 999900,\r\n\t\tdefaults = {\r\n\t\t\ttype: 'load',\r\n\t\t\ttime: false,\r\n\t\t\tshade: true,\r\n\t\t\tshadeClose: true,\r\n\t\t\thtml: '',\r\n\t\t\tanimation: false,\r\n\t\t\tunload: true,\r\n\t\t\talign: 'center',\r\n\t\t\tbuttons: [\r\n\t\t\t\t{\r\n\t\t\t\t\tname: '取消',\r\n\t\t\t\t\tcallback: function(){}\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\tname: '确认',\r\n\t\t\t\t\tcallback: function(){}\r\n\t\t\t\t}\r\n\t\t\t],\r\n\t\t\tinit: function(){},\r\n\t\t\tcloseFn: function(){}\r\n\t\t}\r\n\r\n\tfunction DialogLayer( options ){\r\n\t\tthis.options = $.extend( {}, defaults, options ? options : {} );\r\n\r\n\t\t// 销毁存在的对象\r\n\t\tif( isDialog ) isDialog.close();\r\n\r\n\t\tthis.view();\r\n\t}\r\n\tDialogLayer.prototype.view = function(){\r\n\t\tvar _self = this,\r\n\t\t\topts = _self.options,\r\n\t\t\ttype = opts.type,\r\n\t\t\thtml = opts.html,\r\n\t\t\t$div = $('<div class=\"xcy-layer\"></div>'),\r\n\t\t\tcontent = '',\r\n\t\t\ttags = '',\r\n\t\t\talign = opts.align,\r\n\t\t\tcssStyle = {};\r\n\r\n\t\t_self.$el = $div;\r\n\t\t\r\n\t\t// 加载 提示框\r\n\t\tif( type == 'load' || type == 'tip' ){\r\n\t\t\t// 加载 图标\r\n\t\t\tif( type == 'load' ){\r\n\t\t\t\ttags += '<div class=\"xcy-load\"> </div>'\r\n\t\t\t\t\t + '<div class=\"xcy-text\">' + html +'</div>';\r\n\t\t\t}else{\r\n\t\t\t\ttags += html;\r\n\t\t\t}\r\n\t\t\tcontent = '<div class=\"xcy-load-box\">'\r\n\t\t\t\t+ tags\r\n\t\t\t+ '</div>'\r\n\t\t}\r\n\t\t// 询问框 警告框\r\n\t\tif( type == 'confirm' || type == 'alert' ){\r\n\t\t\t// 确认取消\r\n\t\t\t$.each(opts.buttons, function(i, v){\r\n\t\t\t\ttags += '<div class=\"xcy-btn\">'+ v.name +'</div>'\r\n\t\t\t})\r\n\r\n\t\t\tcontent = '<div class=\"xcy-box\">'\r\n\t\t\t\t+ '<div class=\"xcy-con\">' + html +'</div>'\r\n\t\t\t\t+ '<div class=\"xcy-btns\">'\r\n\t\t\t\t\t+ tags\r\n\t\t\t\t+ '</div>'\r\n\t\t\t+'</div>'\r\n\t\t}\r\n\t\tif( type == 'page' ){\r\n\t\t\t// content = html;\r\n\t\t\t$div.html( html )\r\n\t\t}else{\r\n\t\t\t// 设置html\r\n\t\t\t$div.html(\r\n\t\t\t\t'<div class=\"xcy-main\">'\r\n\t\t\t\t\t+ '<div class=\"xcy-section\">'\r\n\t\t\t\t\t\t+ content\r\n\t\t\t\t\t+ '</div>'\r\n\t\t\t\t+ '</div>');\r\n\t\t}\r\n\r\n\t\t// 遮罩\r\n\t\tif( opts.shade ){\r\n\t\t\t_self.$shade = $('<div class=\"xcy-shade\"></div>');\r\n\t\t\t_self.$shade.attr( 'id', 'xcy-layer-' + (_cid++) );\r\n\r\n\t\t\t$( 'body' ).append( _self.$shade );\r\n\t\t\t// 设置遮罩层css\r\n\t\t\t_self.$shade.css({\r\n\t\t\t\t'zIndex': _zIndex++\r\n\t\t\t})\r\n\t\t}\r\n\t\t// 动画 animation\r\n\t\topts.animation && $div.addClass( opts.animation + 'in' );\r\n\r\n\t\t$div.attr( 'id', 'xcy-layer-' + (_cid++) );\r\n\t\t$( 'body' ).append( $div );\r\n\t\t// 绑定事件\r\n\t\t_self.action();\r\n\r\n\t\t// 设置弹出层css\r\n\t\tif( align == 'center' ){\r\n\t\t\tcssStyle = {\r\n\t\t\t\tmarginTop: -(_self.$el.height()/2),\r\n\t\t\t\tmarginLeft: -(_self.$el.width()/2),\r\n\t\t\t\tleft: '50%',\r\n    \t\t\ttop: '50%'\r\n\t\t\t}\r\n\t\t}else if( align == 'bottom' || align == 'top' ){\r\n\t\t\tcssStyle[ align ] = 0\r\n\t\t\tcssStyle[ 'width' ] = '100%'\r\n\t\t}else if( align == 'left' || align == 'right' ){\r\n\t\t\tcssStyle[ align ] = 0;\r\n\t\t\tcssStyle[ 'top' ] = 0;\r\n\t\t\tcssStyle[ 'height' ] = '100%';\r\n\t\t}\r\n\r\n\t\tcssStyle[ 'zIndex' ] = _zIndex++;\r\n\t\t_self.$el.css( cssStyle )\r\n\t}\r\n\tDialogLayer.prototype.action = function(){\r\n\t\tvar _self = this,\r\n\t\t\topts = _self.options,\r\n\t\t\ttype = opts.type,\r\n\t\t\ttime = opts.time,\r\n\t\t\thtml = opts.html;\r\n\t\t\r\n\t\t// 定时关闭\r\n\t\tif( time !== false ){\r\n\t\t\tif( time == true ) time = 1200;\r\n\t\t\tsetTimeout(function(){\r\n\t\t\t\t_self.close();\r\n\t\t\t}, time );\r\n\t\t}\r\n\r\n\t\t// 遮罩关闭\r\n\t\tif( opts.shade ){\r\n\t\t\t_self.$shade.on('click touchmove', function(){\r\n\t\t\t\t_self.close();\r\n\t\t\t})\r\n\t\t}\r\n\r\n\t\t// 按钮关闭\r\n\t\t$btns = $('.xcy-btn', _self.$el );\r\n\t\tif( $btns.length !== 0 ){\r\n\t\t\t// 循环按钮dom\r\n\t\t\t$('.xcy-btn', _self.$el ).each(function( i ){\r\n\t\t\t\tvar $btn = $( this ),\r\n\t\t\t\t\tobj = opts.buttons[ i ];\r\n\t\t\t\t// 绑定按钮事件\r\n\t\t\t\t$btn.click(function(){\r\n\t\t\t\t\tcallback = obj.callback ? obj.callback( $btn.text() ) : null;\r\n\t\t\t\t\t// 阻止关闭\r\n\t\t\t\t\tif( callback === false ){\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\t_self.close();\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t})\r\n\t\t}\r\n\r\n\t\t// 自定义初始化\r\n\t\topts.init();\r\n\t}\r\n\tDialogLayer.prototype.close = function(){\r\n\t\tvar _self = this,\r\n\t\t\topts = _self.options;\r\n\r\n\t\tif( opts.unload ){\r\n\t\t\tif( opts.animation ){\r\n\t\t\t\t_self.animate( _self.unload )\r\n\t\t\t}else{\r\n\t\t\t\t_self.unload();\r\n\t\t\t}\r\n\t\t}else{\r\n\t\t\tif( opts.animation ){\r\n\t\t\t\t_self.animate( _self.hide )\r\n\t\t\t}else{\r\n\t\t\t\t_self.hide();\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tisDialog = null;\r\n\t\topts.closeFn();\r\n\t}\r\n\tDialogLayer.prototype.animate = function( callback ){\r\n\t\tvar _self = this,\r\n\t\t\topts = _self.options;\r\n\r\n\t\t_self.$el.removeClass( opts.animation + 'in' )\r\n\t\t_self.$el.addClass( opts.animation + 'out' )\r\n\r\n\t\t_self.$el.on('webkitAnimationEnd', function(){\r\n\t\t\t_self.$el.removeClass( opts.animation + 'out' )\r\n\r\n\t\t\tcallback.apply(_self)\r\n\t\t\t_self.$el.off();\r\n\t\t})\r\n\t}\r\n\tDialogLayer.prototype.unload = function(){\r\n\t\tvar _self = this,\r\n\t\t\topts = _self.options;\r\n\r\n\t\t// 释放动画\r\n\t\t_self.$el.find('.xcy-load').removeClass('xcy-load');\r\n\t\t// 移除事件\r\n\t\t$('.xcy-btn', _self.$el ).off( 'click' );\r\n\t\t// 移除dom\r\n\t\t_self.$el.remove();\r\n\r\n\t\tif( opts.shade ){\r\n\t\t\t_self.$shade.off('click touchmove');\r\n\t\t\t_self.$shade.remove();\r\n\t\t}\r\n\t\t_self.options = null;\r\n\t}\r\n\tDialogLayer.prototype.show = function(){\r\n\t\tvar _self = this,\r\n\t\t\topts = _self.options;\r\n\r\n\t\t// 销毁存在的对象\r\n\t\tif( isDialog ) isDialog.close();\r\n\r\n\t\t_self.$el.show();\r\n\t\t_self.$shade && _self.$shade.show();\r\n\t\tisDialog = _self;\r\n\t}\r\n\tDialogLayer.prototype.hide = function(){\r\n\t\tvar _self = this,\r\n\t\t\topts = _self.options;\r\n\r\n\t\t_self.$el.hide();\r\n\t\t_self.$shade && _self.$shade.hide();\r\n\t}\r\n\r\n\tvar dialog = {\r\n\t\tcreate: function( options ){\r\n\t\t\treturn isDialog = new DialogLayer( options );\r\n\t\t},\r\n\t\tload: function( html, time, close ){\r\n\t\t\treturn isDialog = new DialogLayer({\r\n\t\t\t\thtml: html,\r\n\t\t\t\ttime: time !== undefined ? time : 1200,\r\n\t\t\t\tshadeClose: close ? close : false\r\n\t\t\t});\r\n\t\t},\r\n\t\tconfirm: function( html, sure, cancel, close ){\r\n\t\t\treturn isDialog = new DialogLayer({\r\n\t\t\t\ttype: 'confirm',\r\n\t\t\t\thtml: html,\r\n\t\t\t\tshadeClose: close ? close : false,\r\n\t\t\t\tbuttons: [\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tname: '取消',\r\n\t\t\t\t\t\tcallback: cancel\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tname: '确认',\r\n\t\t\t\t\t\tcallback: sure\r\n\t\t\t\t\t}\r\n\t\t\t\t]\r\n\t\t\t});\r\n\t\t},\r\n\t\talert: function( html, sure, close ){\r\n\t\t\treturn isDialog = new DialogLayer({\r\n\t\t\t\ttype: 'alert',\r\n\t\t\t\thtml: html,\r\n\t\t\t\tshadeClose: close ? close : false,\r\n\t\t\t\tbuttons: [{\r\n\t\t\t\t\tname: '确认',\r\n\t\t\t\t\tcallback: sure ? sure : function(){}\r\n\t\t\t\t}]\r\n\t\t\t});\r\n\t\t},\r\n\t\ttip: function( html, time, close, callback ){\r\n\t\t\treturn isDialog = new DialogLayer({\r\n\t\t\t\ttype: 'tip',\r\n\t\t\t\thtml: html,\r\n\t\t\t\ttime: typeof time === 'number' ? time : 1200,\r\n\t\t\t\tshadeClose: typeof close === 'boolean' ? close : true,\r\n\t\t\t\tcloseFn: callback ? callback : function(){}\r\n\t\t\t});\r\n\t\t},\r\n\t\tpage: function( html, callback, close ){\r\n\t\t\treturn isDialog = new DialogLayer({\r\n\t\t\t\ttype: 'page',\r\n\t\t\t\thtml: html,\r\n\t\t\t\tcallback: callback,\r\n\t\t\t\tshadeClose: close ? close : true\r\n\t\t\t});\r\n\t\t},\r\n\t\tconfig: function( options ){\r\n\t\t\tdefaults = $.extend( defaults, options ? options : {} )\r\n\t\t}\r\n\t}\r\n\r\n\t'function' === typeof define? define(function(){\r\n\t\treturn dialog;\r\n\t}) : window.Dialog = dialog;\r\n})(window);"],"sourceRoot":"/source/"}